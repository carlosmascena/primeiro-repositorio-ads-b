<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro</title>
    <link rel="stylesheet" href="css/styles.css">
    <script src="js/funcao.js"></script>
</head> 
<body>   
     <!-- CABEÇALHO OU HEADER --> 
     <div class="header">
        <div class="container"></div>
            <div class="title-header">
               <h2> <span>GDP</span> <span>G</span>estão e <span>D</span>esenvolvimento de <span>P</span>essoas</h2>
            </div>
            <div class="nav">
                <ul>
                    <li><a href="sobre.html">Sobre</a></li>
                    <li><a href="index.html">Login</a></li>
                    <span class="span2"><li><a href="cadastro.html">Cadastro</a></li></span>
                </ul>
            </div>
        </div> 
    </div>       

 <!-- Cadastro -->
    <div class="cadastro">
        <div class="container2">
            <div class="fundo3">
            <h2>Cadastro</h2>

            <form id="form_cadastro" method="post" onsubmit="return cadastrar()" >
                <b>Nome</b>                    
                <input id="nome" type="text" placeholder="ex:Carlos" name="nome" required minlength="3"><br>
              <b>Sobrenome</b>               
               <input id="sobrenome" type="text" placeholder="ex: Mascena" name="sobrenome" 
               required minlength="4"><br>
                <b>Email</b>                 
                 <input id="email" onkeyup="valida_login()" type="email" required placeholder="ex: gdpessoas@gmail.com" 
                 name="email"><br>
              <b>Senha</b>                 
                <input id="senha"onkeyup="valida_senha()" type="password" 
                required minlength="8" as='number' placeholder="Senha númerica" name="senha"><br>
              <b>Confirme a senha</b> 
                <input id="confirme"onkeyup="valida_senha1()" type="password" required minlength="8"
                 placeholder="Senha númerica"  name="confirme">
                <button type="submit">Concluir</button>
            </form>
            
        </div>
        <div class="fundo4">
        </div>
    </div>

    <div id="div_erro"></div>
</body> 
</html>

<script>
    function cadastrar() {
        var formulario = new URLSearchParams(new FormData(form_cadastro));
        fetch("/usuarios/cadastrar", {
            method: "POST",
            body: formulario
        }).then(function (response) {
            
            if (response.ok) {

                window.location.href='index.html';

            } else {

                console.log('Erro de cadastro!');
                response.text().then(function (resposta) {
                    div_erro.innerHTML = resposta;
                });
            }
        });

        return false;
    }
</script>
